---
import { gatAllProducts } from "../service/product.service";
import ProductCard from "./ProductCard.astro";

const products = await gatAllProducts();
---

<section class="flex justify-center">
  <article class="w-fit text-center">
    <div class="grid grid-cols-4 pt-4 gap-20">
      {
        products.map((product) => (
          <ProductCard product={product} key={product.id} />
        ))
      }
    </div>
  </article>
</section>

<script>
  import { $ } from "@/lib/dom-selector";
  import { navigate } from "astro:transitions/client";

  $("a")?.addEventListener("click", (event) => {
    event.preventDefault();
    const href = (event.currentTarget as HTMLAnchorElement).href;
    navigate(href);
  });
</script>
