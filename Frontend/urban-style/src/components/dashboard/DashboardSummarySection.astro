---
import { ReportStore } from '@/state/report.store'
import DashboardSummaryStats from '@/components/dashboard/DashboardSummaryStats.astro'
import DashboardChartReport from './DashboardChartReport.astro'

const { accessToken } = Astro.locals

const reportData = await ReportStore(accessToken).getReportSales()
const salesLastMonth = reportData?.month[reportData.month.length - 2]
---

<article class="flex w-full flex-col gap-5">
	<DashboardSummaryStats salesLastMonth={salesLastMonth} />
	<DashboardChartReport reportData={reportData} />
</article>
