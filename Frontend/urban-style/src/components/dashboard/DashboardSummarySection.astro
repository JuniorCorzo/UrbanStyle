---
import { ReportStore } from '@/state/report.store'
import DashboardSummaryStats from '@/components/dashboard/DashboardSummaryStats.astro'
import DashboardChartReport from './DashboardChartReport.astro'
import DashboardTableMostSold from './DashboardTableMostSold.astro'

const { accessToken } = Astro.locals

const reportData = await ReportStore(accessToken).getReportSales()
const salesLastMonth = reportData?.month[reportData.month.length - 2]
---

<article class="grid w-full grid-cols-3 gap-5">
	<DashboardSummaryStats salesLastMonth={salesLastMonth} />
	<DashboardChartReport reportData={reportData} />
	<DashboardTableMostSold />
</article>
