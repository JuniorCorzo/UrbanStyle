---
import ProductCard from '@/components/home/ProductCard.astro'
import Subtitle from '@/components/text/Subtitle.astro'
import { cn } from '@/lib/cn'
import { ProductService } from '@/service/product.service'
import type { JSX } from 'astro/jsx-runtime'

interface Props extends Partial<JSX.IntrinsicElements['div']> {
	categoryName: string
}
const { categoryName, class: className } = Astro.props

const productResponse = await ProductService.getProductsByCategory(categoryName)

const productsRecommended = productResponse.success ? productResponse.data : []
---

<section class={cn('flex w-full gap-10', className)}>
	<article class="flex w-full flex-col gap-2">
		<Subtitle Text="Productos Relacionados" size="2xl" />
		<div
			class="grid w-full auto-rows-auto grid-cols-2 justify-around gap-5 sm:grid-cols-[repeat(auto-fill,minmax(10rem,12rem))]"
		>
			{
				productsRecommended.map((product) => (
					<div>
						<ProductCard product={product} borderEffect={false} />
					</div>
				))
			}
		</div>
	</article>
</section>
